module.exports.config = {
  name: "joinnoti",
  eventType: ["log:subscribe"],
  version: "1.0.7",
  credits: "Mohammad Akash",
  description: "Premium Auto Welcome Message with New Member & Adder Tag"
};
module.exports.run = async function ({ api, event, Users }) {
  const { threadID, logMessageData } = event;
  const addedMembers = logMessageData.addedParticipants || [];
  const adderID = logMessageData.author || null; // à¦¯à§‡ à¦…à§à¦¯à¦¾à¦¡ à¦•à¦°à§‡à¦›à§‡

  const adderName = adderID ? await Users.getNameUser(adderID) : "Admin";
  const adderMention = adderID ? [{ id: adderID, tag: adderName }] : [];

  for (let member of addedMembers) {
    const userName = await Users.getNameUser(member.userFbId);
    const mention = [{ id: member.userFbId, tag: userName }, ...adderMention];

    const msg = 
`ğŸ’ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’ 
       âœ¨ ğ–ğ„ğ‹ğ‚ğğŒğ„ âœ¨
   *${nameNow}*
 ğŸ’ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’ 

ğŸ‘¤ ğ‡ğğ² ${userName}! ğ–ğ ğšğ«ğ ğ¬ğ¨ ğ¡ğšğ©ğ©ğ² ğ­ğ¨ ğ¡ğšğ¯ğ ğ²ğ¨ğ® ğ¡ğğ«ğ ğŸ‰  

ğŸŒŸ ğğ¥ğğšğ¬ğ ğŸğ¨ğ¥ğ¥ğ¨ğ° ğ­ğ¡ğ ğ ğ«ğ¨ğ®ğ© ğ«ğ®ğ¥ğğ¬  
ğŸ”¥ ğğ ğšğœğ­ğ¢ğ¯ğ & ğ«ğğ¬ğ©ğğœğ­ ğ¨ğ­ğ¡ğğ«ğ¬  

ğŸ™Œ ğ“ğ¡ğšğ§ğ¤ğ¬ ğ­ğ¨ ğ€ğğğğ«: ${adderName} ğŸ’–

âš¡ ğ„ğ§ğ£ğ¨ğ² & ğ’ğ­ğšğ² ğ‚ğ¨ğ§ğ§ğğœğ­ğğ âš¡

ğŸ’ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’ 
  ğŸ¤– ğ‚ğ¡ğšğ­ ğğ¨ğ­ ğğ² ğ’ğšğ¢ğ¦ğ¨ğ§
ğŸ’ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’ `;

    api.sendMessage({ body: msg, mentions: mention }, threadID);
  }
